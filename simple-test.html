<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –∫–Ω–æ–ø–æ–∫ (–∫–∞–∫ –≤ —Ä–∞–±–æ—á–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            max-width: 400px;
            width: 90%;
        }
        
        h1 {
            margin-bottom: 30px;
            font-size: 2em;
            font-weight: 300;
        }
        
        .click-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            border: none;
            border-radius: 50px;
            padding: 20px 40px;
            font-size: 1.3em;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(238, 90, 82, 0.4);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 10px;
        }
        
        .click-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(238, 90, 82, 0.6);
        }
        
        .click-button:active {
            transform: translateY(0);
        }
        
        .action-button {
            background: linear-gradient(45deg, #28a745, #20c997);
            border: none;
            border-radius: 50px;
            padding: 20px 40px;
            font-size: 1.3em;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 10px;
        }
        
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.6);
        }
        
        .location-button {
            background: linear-gradient(45deg, #ffc107, #fd7e14);
            border: none;
            border-radius: 50px;
            padding: 20px 40px;
            font-size: 1.3em;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 10px;
        }
        
        .location-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.6);
        }
        
        .log {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            text-align: left;
        }
        
        .platform-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –∫–Ω–æ–ø–æ–∫</h1>
        
        <div class="platform-info">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ:</h3>
            <div id="platform-details"></div>
        </div>
        
        <button class="click-button" onclick="handleClick()">
            CLICK ME!
        </button>
        
        <button class="action-button" data-action="test-action" onclick="handleAction()">
            –î–ï–ô–°–¢–í–ò–ï
        </button>
        
        <button class="location-button" data-location="test-location" onclick="handleLocation()">
            –õ–û–ö–ê–¶–ò–Ø
        </button>
        
        <div class="log">
            <h3>–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π:</h3>
            <div id="event-log"></div>
        </div>
    </div>

    <script>
        let clickCount = 0;
        
        // Initialize Telegram WebApp
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            console.log('Telegram WebApp initialized');
        }
        
        // Platform detection
        function detectPlatform() {
            const userAgent = navigator.userAgent;
            const isTelegramWebApp = !!window.Telegram?.WebApp;
            const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
            const isDesktop = !isMobile;
            const isTelegramDesktop = isTelegramWebApp && isDesktop;
            
            return {
                userAgent,
                isTelegramWebApp,
                isMobile,
                isDesktop,
                isTelegramDesktop,
                platform: isTelegramDesktop ? 'Telegram Desktop' : 
                          isTelegramWebApp ? 'Telegram Mobile' : 
                          isMobile ? 'Mobile Browser' : 'Desktop Browser'
            };
        }
        
        // Display platform info
        function displayPlatformInfo() {
            const platformInfo = detectPlatform();
            const details = document.getElementById('platform-details');
            details.innerHTML = `
                <p><strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> ${platformInfo.platform}</p>
                <p><strong>User Agent:</strong> ${platformInfo.userAgent}</p>
                <p><strong>Telegram WebApp:</strong> ${platformInfo.isTelegramWebApp ? '–î–∞' : '–ù–µ—Ç'}</p>
                <p><strong>–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</strong> ${platformInfo.isMobile ? '–î–∞' : '–ù–µ—Ç'}</p>
                <p><strong>–î–µ—Å–∫—Ç–æ–ø:</strong> ${platformInfo.isDesktop ? '–î–∞' : '–ù–µ—Ç'}</p>
            `;
        }
        
        // Simple click handler (like in working app)
        function handleClick() {
            clickCount++;
            log(`üéØ CLICK ME! –Ω–∞–∂–∞—Ç–∞ ${clickCount} —Ä–∞–∑(–∞)`);
            
            // Visual feedback
            const button = event.target;
            button.style.transform = 'scale(0.95)';
            setTimeout(() => {
                button.style.transform = '';
            }, 150);
        }
        
        // Simple action handler
        function handleAction() {
            const actionId = event.target.dataset.action;
            log(`‚úÖ –î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: ${actionId}`);
            
            // Visual feedback
            const button = event.target;
            button.style.transform = 'scale(0.95)';
            setTimeout(() => {
                button.style.transform = '';
            }, 150);
        }
        
        // Simple location handler
        function handleLocation() {
            const locationId = event.target.dataset.location;
            log(`üó∫Ô∏è –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ª–æ–∫–∞—Ü–∏—é: ${locationId}`);
            
            // Visual feedback
            const button = event.target;
            button.style.transform = 'scale(0.95)';
            setTimeout(() => {
                button.style.transform = '';
            }, 150);
        }
        
        // Log function
        function log(message) {
            const logElement = document.getElementById('event-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.textContent = `[${timestamp}] ${message}`;
            logElement.appendChild(logEntry);
            
            // Auto-scroll to bottom
            logElement.scrollTop = logElement.scrollHeight;
            
            // Keep only last 20 entries
            while (logElement.children.length > 20) {
                logElement.removeChild(logElement.firstChild);
            }
            
            console.log(message);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            displayPlatformInfo();
            log('–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
            
            if (detectPlatform().isTelegramDesktop) {
                log('‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è Telegram');
            }
        });
    </script>
</body>
</html>
